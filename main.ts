enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const Basketball = SpriteKind.create()
}
let tile_list2: tiles.Tile[] = []
scene.onHitTile(SpriteKind.Basketball, 11, function (sprite) {
    info.changeLifeBy(-1)
    scene.placeOnRandomTile(ball, 9)
    music.wawawawaa.play()
})
scene.onHitTile(SpriteKind.Basketball, 10, function (sprite) {
    if (level == 3) {
        game.over(true)
    } else if (level == 2) {
        level += 1
        setup_level()
    } else {
        level += 1
        setup_level()
    }
})
function create_bounce_animation () {
    anim_bounce = 0
}
function create_rolling_animation () {
    anim_roll = animation.createAnimation(ActionKind.Walking, 200)
    anim_roll.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............444f444.............
        ..........44444f44444...........
        .........4f4444f4444f4..........
        .........44f444f444f44..........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........fffffffffffffff.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        .........44f444f444f44..........
        .........4f4444f4444f4..........
        ..........44444f44444...........
        ............444f444.............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    anim_roll.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............444f444.............
        ..........44444f44444...........
        .........4f4444f4444f4..........
        .........44f444f444f44..........
        ........4444fffffff4444.........
        ........4444444f4444444.........
        ........4444444f4444444.........
        ........fffffffffffffff.........
        ........4444444f4444444.........
        ........4444444f4444444.........
        ........4444fffffff4444.........
        .........44f444f444f44..........
        .........4f4444f4444f4..........
        ..........44444f44444...........
        ............444f444.............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    anim_roll.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............444f444.............
        ..........44444f44444...........
        .........4f4444f4444f4..........
        .........44f444f444f44..........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........fffffffffffffff.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        .........44f444f444f44..........
        .........4f4444f4444f4..........
        ..........44444f44444...........
        ............444f444.............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    anim_roll.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............444f444.............
        ..........44444f44444...........
        .........4f4444f4444f4..........
        .........44f444f444f44..........
        ........4444fffffff4444.........
        ........4444444f4444444.........
        ........4444444f4444444.........
        ........fffffffffffffff.........
        ........4444444f4444444.........
        ........4444444f4444444.........
        ........4444fffffff4444.........
        .........44f444f444f44..........
        .........4f4444f4444f4..........
        ..........44444f44444...........
        ............444f444.............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    animation.attachAnimation(ball, anim_roll)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (ball.isHittingTile(CollisionDirection.Bottom)) {
        ball.vy = -140
    }
})
function clear_level () {
    for (let value of sprites.allOfKind(SpriteKind.Food)) {
        value.destroy()
    }
}
function create_coins () {
    tile_list = scene.getTilesByType(5)
    for (let value of tile_list2) {
        coin = sprites.create(img`
            . . . b b b . . . 
            . . b 5 5 5 b . . 
            . b 5 d 3 d 5 b . 
            . b 5 3 5 1 5 b . 
            . c 5 3 5 1 d c . 
            . c 5 d 1 d d c . 
            . . f d d d f . . 
            . . . f f f . . . 
            `, SpriteKind.Food)
        scene.place(value, coin)
        animation.runMovementAnimation(
        coin,
        animation.animationPresets(animation.bobbing),
        2000,
        true
        )
    }
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.setAction(ball, ActionKind.Walking)
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    animation.setAction(ball, ActionKind.Walking)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    animation.setAction(ball, ActionKind.Walking)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.setAction(ball, ActionKind.Walking)
})
sprites.onOverlap(SpriteKind.Basketball, SpriteKind.Food, function (sprite, otherSprite) {
    info.changeScoreBy(1)
    otherSprite.destroy()
    music.baDing.play()
})
function setup_level () {
    clear_level()
    game.splash("Level " + level)
    create_map()
    create_coins()
    scene.placeOnRandomTile(ball, 9)
}
function create_ball () {
    ball = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............444f444.............
        ..........44444f44444...........
        .........4f4444f4444f4..........
        .........44f444f444f44..........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........fffffffffffffff.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        ........4444f44f44f4444.........
        .........44f444f444f44..........
        .........4f4444f4444f4..........
        ..........44444f44444...........
        ............444f444.............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, SpriteKind.Basketball)
    controller.moveSprite(ball, 50, 0)
    ball.ay = 290
    scene.placeOnRandomTile(ball, 9)
    scene.cameraFollowSprite(ball)
    create_bounce_animation()
    create_rolling_animation()
}
function create_map () {
    scene.setBackgroundColor(9)
    scene.setTile(13, img`
        d 1 d d d d d d d 1 d d d d d d 
        d 1 d d d d d d d 1 d d d d d d 
        d 1 d d d d d d d 1 d d d d d d 
        1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        d d d d d d d d d d d d d d d d 
        `, true)
    scene.setTile(11, img`
        . . . . . . . c . . . . . . . . 
        . . . . . . c c c . . . . . . . 
        . . . . . . c b c . . . . . . . 
        . . . . . c c b c c . . . . . . 
        . . . . . c b b b c . . . . . . 
        . . . . . c b b b c . . . . . . 
        . . . . c c b b d c c . . . . . 
        . . . . c b b b d b c . . . . . 
        . . . . c b b b b b c . . . . . 
        . . . . c b b b d b c . . . . . 
        . . . c c b b b b b c c . . . . 
        . . . c b b b b b b b c . . . . 
        . . . c b d b b b b b c . . . . 
        . . . c b d d b b b b c . . . . 
        . . . c b b b b b b b c . . . . 
        . . . c c c c c c c c c . . . . 
        `, true)
    scene.setTile(10, img`
        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
        . . . 1 1 2 2 2 2 2 2 2 1 1 . . 
        . . . 1 1 2 1 1 1 1 1 2 1 1 . . 
        . . . 1 1 2 1 1 1 1 1 2 1 1 . . 
        . . . 1 1 2 2 2 2 2 2 2 1 1 . . 
        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        . . . . . . . . f . . . . . . . 
        `, true)
    scene.setTile(9, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, false)
    scene.setTile(5, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, false)
    if (level == 1) {
        scene.setTileMap(img`
            9 . . . . . . . . . . . . . . . . . . . . . . . 5 . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . d d d d . . . . . a 
            . . . . . . . 5 . . . . . . 5 . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . d d d d . . . . . . . . . a 
            . . . . b . . . d d d d . . . . . d d . . . . . 5 . . . . . . a 
            . . . d d d d . . . . d d . . . d d . . . . . . d d d d d . . a 
            . . . . . . . . . 5 . . d d 5 d d . . b . b . b . . . . . . . a 
            d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d 
            `)
    } else if (level == 2) {
        scene.setTileMap(img`
            9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d 
            `)
    } else {
        scene.setTileMap(img`
            9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 
            d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d d 
            `)
    }
}
let coin: Sprite = null
let tile_list: tiles.Tile[] = []
let anim_roll: animation.Animation = null
let anim_bounce = 0
let ball: Sprite = null
let level = 0
level = 1
setup_level()
create_ball()
info.setScore(0)
info.setLife(3)
